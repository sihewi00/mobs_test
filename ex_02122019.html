<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>DOM Manipulation</title>
    <link rel="stylesheet" href="ex_02122019.css">
</head>

<body>

    <header>
        <button id="b1">1</button>
        <button id="b2">2</button>
        <button id="b3">3</button>
        <button id="b4">4</button>
        <button id="b5">5</button>
        <button id="b6">6</button>
    </header>

    <main>

        <div class="image"></div>

    </main>

    <footer>
        I am the footer
    </footer>
</body>

<script>

    var colors = ['indianred', 'hotpink', 'darkorange', 'fuchsia', 'blueviolet', 'slateblue'];

    function handleHeaderClick(event) {

        switch (event.target.id) {

            case 'b1':
                createDivs();
                break;
        }

    }
    function handleMainClick(event) {

        let mainElement = document.querySelector('main'),
            divElements = Array.from(mainElement.querySelectorAll('div')),
            targetIndex = divElements.indexOf(event.target),
            rowHeadElement = divElements[Math.floor(targetIndex / 3) * 3];

        mainElement.insertBefore(event.target, rowHeadElement);
    }

    function createDivs() {

        let mainElement = document.querySelector('main');

        mainElement.innerHTML = '';

        mainElement.style.gridTemplateColumns = '1fr 1fr 1fr';
        mainElement.style.gridTemplateRows = '1fr 1fr 1fr';

        for (let i = 0; i < 9; i++) {

            let divElement = document.createElement('div');

            divElement.classList.add('panel');
            divElement.style.background = colors[Math.floor(Math.random() * 6)];
            divElement.innerHTML = Math.floor(Math.random() * 10 + 1);

            mainElement.appendChild(divElement);
        }

        mainElement.addEventListener('click', handleMainClick);
    }

    document.querySelector('header').addEventListener('click', handleHeaderClick);


    fetch('https://api.chucknorris.io/jokes/random')
        .then(resp => resp.json())
        .then(function (data) {
            console.log("Result: ", data);
        });
</script>

</html>